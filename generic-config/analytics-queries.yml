# Analytics Query Configurations
# This file contains query configurations for analytics operations

queries:
  # Daily trading volume analysis
  daily-trading-volume:
    name: "Daily Trading Volume Analysis"
    description: "Calculate daily trading volume by symbol"
    database: "analytics"
    sql: |
      SELECT
        symbol,
        CAST(trade_date AS DATE) as trade_day,
        SUM(quantity) as total_volume,
        COUNT(*) as trade_count,
        AVG(price) as avg_price
      FROM trades
      GROUP BY symbol, CAST(trade_date AS DATE)
      ORDER BY trade_day DESC, total_volume DESC
      LIMIT ?
    parameters:
      - name: "limit"
        type: "integer"
        required: false

  # Top performers analysis
  top-performers:
    name: "Top Performing Stocks"
    description: "Find top performing stocks by percentage gain"
    database: "analytics"
    sql: |
      SELECT
        symbol,
        MIN(price) as min_price,
        MAX(price) as max_price,
        ((MAX(price) - MIN(price)) / MIN(price)) * 100 as percentage_gain,
        COUNT(*) as trade_count
      FROM trades
      GROUP BY symbol
      HAVING COUNT(*) >= 1
      ORDER BY percentage_gain DESC
      LIMIT ?
    parameters:
      - name: "limit"
        type: "integer"
        required: false

  # Market summary statistics
  market-summary:
    name: "Market Summary Statistics"
    description: "Get overall market summary statistics"
    database: "datawarehouse"
    sql: |
      SELECT
        id,
        summary_date,
        total_volume,
        total_trades,
        avg_trade_value,
        top_symbol,
        top_symbol_volume,
        created_at
      FROM market_summary
      ORDER BY summary_date DESC
      LIMIT ?
    parameters:
      - name: "limit"
        type: "integer"
        required: false
